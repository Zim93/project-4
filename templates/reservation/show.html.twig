{% extends 'base.html.twig' %}

{% block title %}Reservation{% endblock %}

{% block body %}
    <link rel="stylesheet" href="/raty-master/lib/jquery.raty.css">

    <h1>Reservation</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ reservation.id }}</td>
            </tr>
            <tr>
                <th>Nbr_voyagers</th>
                <td>{{ reservation.nbrVoyagers }}</td>
            </tr>
            <tr>
                <th>Start_date</th>
                <td>{{ reservation.startDate ? reservation.startDate|date('Y-m-d') : '' }}</td>
            </tr>
            <tr>
                <th>End_date</th>
                <td>{{ reservation.endDate ? reservation.endDate|date('Y-m-d') : '' }}</td>
            </tr>
            <tr>
                <th>Total</th>
                <td>{{ reservation.total }}</td>
            </tr>
            <tr>
                <th>Nbr_nights</th>
                <td>{{ reservation.nbrNights }}</td>
            </tr>
            <tr>
                <th>Created_at</th>
                <td>{{ reservation.createdAt ? reservation.createdAt|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>Updated_at</th>
                <td>{{ reservation.updatedAt ? reservation.updatedAt|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>House</th>
                <td>{{reservation.house.name}}</td>
            </tr>
            <tr>
                <th>Voyageurs</th>
                <td>{{reservation.guest.firstname}}</td>
            </tr>
            <tr>
                {% if reservation.comment is not null %}
                    <th>Comment</th>
                    <td>{{reservation.comment.message}}</td>
                {% endif %}
            </tr>
        </tbody>
    </table>

    {% if form_comment is defined %}
        <div class="w-50">
            {{ form_start(form_comment, {'action':'/comment/new'}) }}
                <div  class="rating-comment"> </div>

                {{form_row(form_comment.message)}}
                {{form_widget(form_comment.note)}}


                <input type="hidden" name="house" value="{{reservation.house.id}}"/>
                <input type="hidden" name="reservation" value="{{reservation.id}}"/>

                <button class="btn btn-warning">{{ button_label|default('Save') }}</button>
            {{ form_end(form_comment)}}
        </div>
        
    {% endif %}
        
        <script src="/raty-master/lib/jquery.raty.js"></script>
        <script>
            $(".rating-comment").raty({
                starOff:'/raty-master/lib/images/star-off.png',
                starOn:'/raty-master/lib/images/star-on.png',
                starHalf:'/raty-master/lib/images/star-half.png',
                half: true,
                click: function(score) {
                    console.log(score);
                    $('#comment_note').val(score);
                }
            });
        </script>
    

    <a href="{{ path('app_reservation_index') }}">back to list</a>

    <a href="{{ path('app_reservation_edit', {'id': reservation.id}) }}">edit</a>

    {{ include('reservation/_delete_form.html.twig') }}
{% endblock %}
